<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Me-API Playground</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-code"></i> Me-API Playground</h1>
            <p>Build and host a very basic playground that stores your own information</p>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="profile">Profile</button>
            <button class="tab-btn" data-tab="api-test">API Testing</button>
            <button class="tab-btn" data-tab="docs">Documentation</button>
        </nav>

        <!-- Profile Tab -->
        <div id="profile" class="tab-content active">
            <div class="profile-section">
                <h2>Profile Information</h2>
                <div id="profile-display" class="profile-display">
                    <div class="loading">Loading profile...</div>
                </div>
                <button id="refresh-profile" class="btn btn-primary">
                    <i class="fas fa-refresh"></i> Refresh
                </button>
            </div>
        </div>

        <!-- API Testing Tab -->
        <div id="api-test" class="tab-content">
            <div class="api-section">
                <h2>API Testing Interface</h2>
                
                <div class="endpoint-test">
                    <h3>Test Endpoints</h3>
                    
                    <div class="test-group">
                        <h4>GET /api/profile</h4>
                        <button class="btn btn-success" onclick="testEndpoint('GET', '/api/profile')">
                            Test Profile
                        </button>
                    </div>

                    <div class="test-group">
                        <h4>GET /api/skills</h4>
                        <button class="btn btn-success" onclick="testEndpoint('GET', '/api/skills')">
                            Test Skills
                        </button>
                    </div>

                    <div class="test-group">
                        <h4>GET /api/projects</h4>
                        <div class="input-group">
                            <input type="text" id="skill-filter" placeholder="Filter by skill (optional)">
                            <button class="btn btn-success" onclick="testProjectsEndpoint()">
                                Test Projects
                            </button>
                        </div>
                    </div>

                    <div class="test-group">
                        <h4>GET /api/search</h4>
                        <div class="input-group">
                            <input type="text" id="search-query" placeholder="Search query">
                            <button class="btn btn-success" onclick="testSearchEndpoint()">
                                Search
                            </button>
                        </div>
                    </div>

                    <div class="test-group">
                        <h4>GET /health</h4>
                        <button class="btn btn-info" onclick="testEndpoint('GET', '/health')">
                            Health Check
                        </button>
                    </div>
                </div>

                <div class="response-section">
                    <h3>API Response</h3>
                    <pre id="api-response" class="response-display">No response yet. Test an endpoint above.</pre>
                </div>
            </div>
        </div>

        <!-- Documentation Tab -->
        <div id="docs" class="tab-content">
            <div class="docs-section">
                <h2>API Documentation</h2>
                
                <div class="endpoint-doc">
                    <h3>Available Endpoints</h3>
                    
                    <div class="endpoint">
                        <h4><span class="method get">GET</span> /health</h4>
                        <p>Health check endpoint to verify API is running</p>
                        <div class="example">
                            <strong>Response:</strong>
                            <code>{"status": "healthy", "message": "Me-API Playground is running!"}</code>
                        </div>
                    </div>

                    <div class="endpoint">
                        <h4><span class="method get">GET</span> /api/profile</h4>
                        <p>Get complete profile information including skills, projects, and work experience</p>
                        <div class="example">
                            <strong>Parameters:</strong> id (optional, defaults to 1)<br>
                            <strong>Returns:</strong> Complete profile object with nested relationships
                        </div>
                    </div>

                    <div class="endpoint">
                        <h4><span class="method get">GET</span> /api/skills</h4>
                        <p>Get all skills for a profile</p>
                        <div class="example">
                            <strong>Parameters:</strong> profile_id (optional, defaults to 1)<br>
                            <strong>Returns:</strong> Array of skill objects
                        </div>
                    </div>

                    <div class="endpoint">
                        <h4><span class="method get">GET</span> /api/projects</h4>
                        <p>Get projects, optionally filtered by skill</p>
                        <div class="example">
                            <strong>Parameters:</strong> profile_id, skill (optional filter)<br>
                            <strong>Returns:</strong> Array of project objects
                        </div>
                    </div>

                    <div class="endpoint">
                        <h4><span class="method get">GET</span> /api/search</h4>
                        <p>Search across skills, projects, and work experiences</p>
                        <div class="example">
                            <strong>Parameters:</strong> q (search query), profile_id<br>
                            <strong>Returns:</strong> Object with matched results grouped by category
                        </div>
                    </div>

                    <div class="endpoint">
                        <h4><span class="method post">POST</span> /api/profile</h4>
                        <p>Create a new profile with complete information</p>
                    </div>

                    <div class="endpoint">
                        <h4><span class="method put">PUT</span> /api/profile/:id</h4>
                        <p>Update existing profile information</p>
                    </div>
                </div>

                <div class="setup-instructions">
                    <h3>Setup Instructions</h3>
                    <ol>
                        <li>Install Python dependencies: <code>pip install -r requirements.txt</code></li>
                        <li>Set up MySQL database and run schema.sql</li>
                        <li>Configure database connection in config.py</li>
                        <li>Run the application: <code>python app.py</code></li>
                        <li>Access the playground at <code>http://localhost:5000</code></li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
